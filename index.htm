<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link rel ="stylesheet" type = "text/css" href= "./css/bootstrap.css">
    <link rel ="stylesheet" type = "text/css" href= "./css/styles.css">
    <script type="text/javascript" src="js/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="js/bootstrap-tab.js"></script>
    <script type="text/javascript" src="js/html5slider.js"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDB8hSxJc0O5AOlzvYVAle7ARvFENvFqbI&sensor=true"></script>
  </head>
  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class= "brand" href= "index.htm">Device Manager</a>
          <ul class="nav">
            <li class="active">
              <a href="index.htm">Home</a>
            </li>
            <li><a href="device.htm">Add Device</a></li>
            <li><a href="overlay.htm">Add Overlay</a></li>
            <li><a href="area.htm">Add Area</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div>
      <div id="sidebar">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#devices" data-toggle="tab">Devices</a></li>
            <li><a href="#overlays" data-toggle="tab">Overlays</a></li>
            <li><a href="#areas" data-toggle="tab">Areas</a></li>
        </ul>
        <div class="tab-content">
          <div id="devices" class="tab-pane active">
            <div class="btn-group">
              <button class="btn active">Visible</button>
              <button class="btn">Hidden</button>
            </div>
            <br>
            <input type="text" placeholder="Search">
          </div>
          <div id="overlays" class="tab-pane">
            <div class="well">
                Opacity
                <input type="range" min="0" max="100" step="1" value="50" id="overlay-opacity">
        </div>
            <input type="text" placeholder="Search">
          </div>
          <div id="areas" class="tab-pane">
            <div class="btn-group">
              <button class="btn">Visible</button>
              <button class="btn active">Hidden</button>
            </div>
            <br>
            <input type="text" placeholder="Search">
          </div>
        </div>
      </div>
      <div id="map-canvas"></div>
    </div>
    <script type = "text/javascript" src = "js/RotatedOverlay.js"></script>
    <script type = "text/javascript" src = "js/map.js"></script>
    <script type = "text/javascript" src = "js/device-api.js"></script>
    <script type = "text/javascript" src = "js/device-map.js"></script>
    <script type = "text/javascript" src = "js/overlay-map.js"></script>
    <script type = "text/javascript" src = "js/area-map.js"></script>
    <script type="text/javascript">
      (function() {
        Map.initializeMap("#map-canvas");
        DeviceMap.loadDevices();
        OverlayMap.loadOverlays();
        DeviceAPI.getAreas(AreaMap.drawAreas);

        function setupToggle(obj, group) {
            group.children().first().click(function() {
              var $this = $(this);
              if(!$this.hasClass('active')) {
                obj.toggle(true);
                $this.addClass('active');
                $this.next().removeClass('active');
              }
            });
            group.children().last().click(function() {
              var $this = $(this);
              if(!$this.hasClass('active')) {
                obj.toggle(false);
                $this.addClass('active');
                $this.prev().removeClass('active');
              }
            });
        }

        setupToggle(DeviceMap, $("#devices .btn-group"));
        setupToggle(AreaMap, $("#areas .btn-group"));

        $("#overlay-opacity").change(function() {
            OverlayMap.setOpacity($(this).val());
        }).change();
      })();
    </script>
  </body>
</html>
